# CatBoost Ranking System

## ะะฑะทะพั

ะกะธััะตะผะฐ ัะฐะฝะถะธัะพะฒะฐะฝะธั ัะพะฒะฐัะฝัั ัะตะบะพะผะตะฝะดะฐัะธะน ะฝะฐ ะพัะฝะพะฒะต **CatBoost** โ ะณัะฐะดะธะตะฝัะฝะพะณะพ ะฑัััะธะฝะณะฐ ั ะฟะพะดะดะตัะถะบะพะน ะบะฐัะตะณะพัะธะฐะปัะฝัั ะฟัะธะทะฝะฐะบะพะฒ ะธ ัะฟะตัะธะฐะปะธะทะธัะพะฒะฐะฝะฝะพะน loss-ััะฝะบัะธะตะน ะดะปั ัะฐะฝะถะธัะพะฒะฐะฝะธั (YetiRank).

### ะะฐัะตะผ ะฝัะถะตะฝ CatBoost?

**ะัะพะฑะปะตะผะฐ ัะพัะผัะปัะฝะพะณะพ ัะบะพัะธะฝะณะฐ:**
- ะััะฝะฐั ะฝะฐัััะพะนะบะฐ ะฒะตัะพะฒ (`0.3 * similarity + 0.4 * feedback + ...`)
- ะะต ััะธััะฒะฐะตั ัะปะพะถะฝัะต ะฝะตะปะธะฝะตะนะฝัะต ะฒะทะฐะธะผะพะดะตะนััะฒะธั ะฟัะธะทะฝะฐะบะพะฒ
- ะกะปะพะถะฝะพ ะฐะดะฐะฟัะธััะตััั ะฟะพะด ัะฟะตัะธัะธะบั ะบะฐัะฐะปะพะณะฐ

**ะะตัะตะฝะธะต ั CatBoost:**
- โ ะะฒัะพะผะฐัะธัะตัะบะธ ะพะฑััะฐะตััั ะฝะฐ ัะตะฐะปัะฝัั ะดะฐะฝะฝัั (ัะธะดะฑะตะบ + ะทะฐะบะฐะทั)
- โ ะััะฒะปัะตั ะฝะตะปะธะฝะตะนะฝัะต ะฟะฐััะตัะฝั (ะฝะฐะฟัะธะผะตั: "ัะพะฒะฐัั ั discount > 10% + similarity > 0.7 โ ะฒััะพะบะฐั ะบะพะฝะฒะตััะธั")
- โ ะะตะฟัะตััะฒะฝะพะต ัะปัััะตะฝะธะต: ะฟะตัะตะพะฑััะตะฝะธะต ะฝะฐ ะฝะพะฒัั ะดะฐะฝะฝัั
- โ ะะฝัะตัะฟัะตัะธััะตะผะพััั: feature importance ะฟะพะบะฐะทัะฒะฐะตั, ััะพ ะฒะฐะถะฝะพ

---

## ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                        ะะะฃะงะะะะ ะะะะะะ                          โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

1. Training Data Generation
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   โ ะะพะทะธัะธะฒะฝัะต ะฟัะธะผะตัั:                                  โ
   โ โข ะคะธะดะฑะตะบ: ะฟะฐัั ัะพะฒะฐัะพะฒ ั positive feedback โฅ 5      โ
   โ โข ะะฐะบะฐะทั: ัะพะฒะฐัั ะธะท ะพะดะฝะพะณะพ ะทะฐะบะฐะทะฐ (co-purchase)     โ
   โ                                                       โ
   โ ะะตะณะฐัะธะฒะฝัะต ะฟัะธะผะตัั:                                  โ
   โ โข ะคะธะดะฑะตะบ: ะฟะฐัั ั negative > positive                โ
   โ โข Hard negatives: ัะปััะฐะนะฝัะต ัะพะฒะฐัั (ะฝะต ะบัะฟะปะตะฝะฝัะต)   โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                           โ
2. Feature Extraction (36 ะฟัะธะทะฝะฐะบะพะฒ)
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   โ ะััะฟะฟะฐ 1: ะกะตะผะฐะฝัะธัะตัะบะธะต (6 ะฟัะธะทะฝะฐะบะพะฒ)               โ
   โ - embedding_cosine_similarity                        โ
   โ - embedding_l2_distance, dot_product, euclidean...  โ
   โ                                                       โ
   โ ะััะฟะฟะฐ 2: ะคะธะดะฑะตะบ (8 ะฟัะธะทะฝะฐะบะพะฒ)                      โ
   โ - pair_feedback_positive/negative/approval_rate     โ
   โ - scenario_feedback_positive/negative/approval_rate โ
   โ                                                       โ
   โ ะััะฟะฟะฐ 3: ะฆะตะฝะพะฒัะต (7 ะฟัะธะทะฝะฐะบะพะฒ)                     โ
   โ - price_ratio, price_diff, discount_percent...      โ
   โ                                                       โ
   โ ะััะฟะฟะฐ 4: ะะฐัะตะณะพัะธะนะฝัะต (5 ะฟัะธะทะฝะฐะบะพะฒ)                โ
   โ - same_category, same_root_category, same_vendor... โ
   โ                                                       โ
   โ ะััะฟะฟะฐ 5: Co-purchase (3 ะฟัะธะทะฝะฐะบะฐ)                  โ
   โ - copurchase_count, copurchase_log, exists          โ
   โ                                                       โ
   โ ะััะฟะฟะฐ 6: ะะพะฟัะปััะฝะพััั (4 ะฟัะธะทะฝะฐะบะฐ)                 โ
   โ - has_image, is_discounted, price_bucket...         โ
   โ                                                       โ
   โ ะััะฟะฟะฐ 7: ะะพะฝัะตะบัั ะบะพัะทะธะฝั (3 ะฟัะธะทะฝะฐะบะฐ)             โ
   โ - cart_similarity_max, cart_similarity_avg...       โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                           โ
3. CatBoost Training
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
   โ ะะปะณะพัะธัะผ: CatBoostRanker                            โ
   โ Loss: YetiRank (pairwise ranking)                   โ
   โ ะะตััะธะบะธ: NDCG@10, PrecisionAt@5, AUC, AP           โ
   โ                                                       โ
   โ ะะฐัะฐะผะตััั:                                           โ
   โ - iterations: 500 (ะดะตัะตะฒัะตะฒ)                        โ
   โ - learning_rate: 0.05                               โ
   โ - depth: 6 (ะณะปัะฑะธะฝะฐ ะดะตัะตะฒะฐ)                         โ
   โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                           โ
4. Model Persistence
   models/catboost_ranker_YYYYMMDD_HHMMSS.cbm
   models/catboost_ranker_YYYYMMDD_HHMMSS_metadata.json


โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                      INFERENCE (ะะะะะะะจะะ)                       โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

GET /recommendations/{product_id}
         โ
1. Candidate Retrieval (100 ัะพะฒะฐัะพะฒ)
   - ะัะปะธ ะตััั ััะตะฝะฐัะธะน โ ัะพะฒะฐัั ะธะท ัะฒัะทะฐะฝะฝัั ะณััะฟะฟ
   - ะะฝะฐัะต โ ัะตะผะฐะฝัะธัะตัะบะธะน ะฟะพะธัะบ (FAISS)
         โ
2. Feature Extraction
   - ะะทะฒะปะตะบะฐะตะผ 36 ะฟัะธะทะฝะฐะบะพะฒ ะดะปั ะบะฐะถะดะพะน ะฟะฐัั (main, candidate)
         โ
3. CatBoost Scoring
   - model.predict(features) โ scores [0.1, 0.9, 0.3, ...]
         โ
4. Re-ranking
   - ะกะพััะธััะตะผ ะฟะพ ML-ัะบะพัั
   - ะะพะทะฒัะฐัะฐะตะผ ัะพะฟ-20
```

---

## ะัะธะทะฝะฐะบะธ (Features)

### 1. ะกะตะผะฐะฝัะธัะตัะบะธะต (6 ะฟัะธะทะฝะฐะบะพะฒ)

ะัะฝะพะฒะฐะฝั ะฝะฐ ัะผะฑะตะดะดะธะฝะณะฐั ัะพะฒะฐัะพะฒ (768-ะผะตัะฝัะต ะฒะตะบัะพัั ะพั Ollama nomic-embed-text).

| ะัะธะทะฝะฐะบ | ะะฟะธัะฐะฝะธะต | ะะธะฐะฟะฐะทะพะฝ |
|---------|----------|----------|
| `embedding_cosine_similarity` | ะะพัะธะฝััะฝะฐั ะฑะปะธะทะพััั ัะผะฑะตะดะดะธะฝะณะพะฒ | [0, 1] |
| `embedding_l2_distance` | L2-ัะฐัััะพัะฝะธะต ะฝะพัะผะฐะปะธะทะพะฒะฐะฝะฝัั ะฒะตะบัะพัะพะฒ | [0, 2] |
| `embedding_dot_product` | ะกะบะฐะปััะฝะพะต ะฟัะพะธะทะฒะตะดะตะฝะธะต | [-1, 1] |
| `embedding_euclidean_distance` | ะะฒะบะปะธะดะพะฒะพ ัะฐัััะพัะฝะธะต | [0, โ] |
| `embedding_manhattan_distance` | ะะฐะฝััััะตะฝัะบะพะต ัะฐัััะพัะฝะธะต | [0, โ] |
| `embedding_has_valid` | ะะฑะฐ ัะผะฑะตะดะดะธะฝะณะฐ ะฒะฐะปะธะดะฝั | {0, 1} |

**ะะฐัะตะผ ะฝะตัะบะพะปัะบะพ ะผะตััะธะบ ะฑะปะธะทะพััะธ?**
- CatBoost ัะฐะผ ะฒัะฑะตัะตั ะปััััั ะบะพะผะฑะธะฝะฐัะธั
- ะะฐะทะฝัะต ะผะตััะธะบะธ ัะปะฐะฒะปะธะฒะฐัั ัะฐะทะฝัะต ะฐัะฟะตะบัั ะฑะปะธะทะพััะธ

---

### 2. ะคะธะดะฑะตะบ (8 ะฟัะธะทะฝะฐะบะพะฒ)

ะกัะฐัะธััะธะบะฐ ะพะดะพะฑัะตะฝะธะน ะฟะพะปัะทะพะฒะฐัะตะปะตะน.

| ะัะธะทะฝะฐะบ | ะะฟะธัะฐะฝะธะต | ะคะพัะผัะปะฐ |
|---------|----------|---------|
| `pair_feedback_positive` | ะะพะป-ะฒะพ ๐ ะดะปั ะฟะฐัั | COUNT(๐) |
| `pair_feedback_negative` | ะะพะป-ะฒะพ ๐ ะดะปั ะฟะฐัั | COUNT(๐) |
| `pair_feedback_total` | ะัะตะณะพ ะพัะตะฝะพะบ | positive + negative |
| `pair_feedback_approval_rate` | ะะฐะนะตัะพะฒัะบะธะน CTR | (positive + 1) / (total + 2) |
| `scenario_feedback_positive` | ๐ ะฒ ัะฐะผะบะฐั ััะตะฝะฐัะธั | COUNT(๐) |
| `scenario_feedback_negative` | ๐ ะฒ ัะฐะผะบะฐั ััะตะฝะฐัะธั | COUNT(๐) |
| `scenario_feedback_total` | ะัะตะณะพ ะพัะตะฝะพะบ ะฒ ััะตะฝะฐัะธะธ | positive + negative |
| `scenario_feedback_approval_rate` | ะะฐะนะตัะพะฒัะบะธะน CTR ััะตะฝะฐัะธั | (positive + 1) / (total + 2) |

**ะะฐะนะตัะพะฒัะบะพะต ัะณะปะฐะถะธะฒะฐะฝะธะต:**
- ะะทะฑะตะณะฐะตั ะฟะตัะตะพัะตะฝะบะธ ะฟะฐั ั ะผะฐะปัะผ ะบะพะปะธัะตััะฒะพะผ ะพัะตะฝะพะบ
- ะัะธะผะตั: 1/1 (100%) โ (1+1)/(1+2) = 66.7%
- ะัะธะผะตั: 10/10 (100%) โ (10+1)/(10+2) = 91.7%

---

### 3. ะฆะตะฝะพะฒัะต (7 ะฟัะธะทะฝะฐะบะพะฒ)

| ะัะธะทะฝะฐะบ | ะะฟะธัะฐะฝะธะต | ะคะพัะผัะปะฐ |
|---------|----------|---------|
| `candidate_price` | ะฆะตะฝะฐ ะบะฐะฝะดะธะดะฐัะฐ | price |
| `price_ratio` | ะัะฝะพัะตะฝะธะต ัะตะฝ | cand_price / main_price |
| `price_diff` | ะะฑัะพะปััะฝะฐั ัะฐะทะฝะธัะฐ ัะตะฝ | cand_price - main_price |
| `price_diff_percent` | ะัะฝะพัะธัะตะปัะฝะฐั ัะฐะทะฝะธัะฐ ัะตะฝ | (diff / main_price) ร 100 |
| `has_discount` | ะััั ะปะธ ัะบะธะดะบะฐ | {0, 1} |
| `discount_percent` | ะะฐะทะผะตั ัะบะธะดะบะธ | (price - discount) / price ร 100 |
| `discount_amount` | ะะฑัะพะปััะฝะฐั ัะบะธะดะบะฐ | price - discount |

**ะะธะฟะพัะตะทะฐ:**
- ะะพะปัะทะพะฒะฐัะตะปะธ ะฟัะตะดะฟะพัะธัะฐัั ัะพะฒะฐัั ะฒ ะพะฟัะตะดะตะปะตะฝะฝะพะผ ัะตะฝะพะฒะพะผ ะดะธะฐะฟะฐะทะพะฝะต
- ะกะบะธะดะบะธ ัะฒะตะปะธัะธะฒะฐัั ะบะพะฝะฒะตััะธั

---

### 4. ะะฐัะตะณะพัะธะนะฝัะต (5 ะฟัะธะทะฝะฐะบะพะฒ)

| ะัะธะทะฝะฐะบ | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| `same_category` | ะขะฐ ะถะต ะบะฐัะตะณะพัะธั? {0, 1} |
| `same_root_category` | ะขะฐ ะถะต ะบะพัะฝะตะฒะฐั ะบะฐัะตะณะพัะธั? {0, 1} |
| `category_distance` | ะะฐัััะพัะฝะธะต ะฒ ะดะตัะตะฒะต ะบะฐัะตะณะพัะธะน [0, 3] |
| `same_vendor` | ะขะพั ะถะต ะฟัะพะธะทะฒะพะดะธัะตะปั? {0, 1} |
| `different_vendor` | ะะฐะทะฝัะต ะฟัะพะธะทะฒะพะดะธัะตะปะธ? {0, 1} |

**ะะธะฟะพัะตะทะฐ:**
- ะขะพะฒะฐัั ะธะท ัะผะตะถะฝัั ะบะฐัะตะณะพัะธะน (ะฝะพ ะฝะต ัะพะน ะถะต) ัะฐััะพ ะฟะพะบัะฟะฐัััั ะฒะผะตััะต
- ะะฐะทะฝัะต ะฑัะตะฝะดั โ ะดะธะฒะตััะธัะธะบะฐัะธั ะฒัะฑะพัะฐ

---

### 5. Co-purchase (3 ะฟัะธะทะฝะฐะบะฐ)

ะกัะฐัะธััะธะบะฐ ัะพะฒะผะตััะฝัั ะฟะพะบัะฟะพะบ ะธะท ะธััะพัะธัะตัะบะธั ะทะฐะบะฐะทะพะฒ.

| ะัะธะทะฝะฐะบ | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| `copurchase_count` | ะกะบะพะปัะบะพ ัะฐะท ะบัะฟะธะปะธ ะฒะผะตััะต |
| `copurchase_log` | log(1 + count) โ ะดะปั ัััะพะนัะธะฒะพััะธ |
| `copurchase_exists` | ะฅะพัั ะฑั 1 ัะพะฒะผะตััะฝะฐั ะฟะพะบัะฟะบะฐ? {0, 1} |

**ะกะธะปัะฝะตะนัะธะน ัะธะณะฝะฐะป:**
- ะัะปะธ ัะพะฒะฐัั ะฟะพะบัะฟะฐะปะธ ะฒะผะตััะต โ ะฒััะพะบะฐั ะฒะตัะพััะฝะพััั ัะตะปะตะฒะฐะฝัะฝะพััะธ

---

### 6. ะะพะฟัะปััะฝะพััั (4 ะฟัะธะทะฝะฐะบะฐ)

| ะัะธะทะฝะฐะบ | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| `has_image` | ะััั ะปะธ ะบะฐััะธะฝะบะฐ? {0, 1} |
| `is_discounted` | ะััั ะปะธ ะฐะบัะธะฒะฝะฐั ัะบะธะดะบะฐ? {0, 1} |
| `price_bucket` | ะฆะตะฝะพะฒะฐั ะบะฐัะตะณะพัะธั {0: <1K, 1: 1K-10K, 2: >10K} |
| `name_length` | ะะปะธะฝะฐ ะฝะฐะทะฒะฐะฝะธั (proxy ะบะฐัะตััะฒะฐ ะพะฟะธัะฐะฝะธั) |

---

### 7. ะะพะฝัะตะบัั ะบะพัะทะธะฝั (3 ะฟัะธะทะฝะฐะบะฐ)

ะฃัะธััะฒะฐัััั ัะพะปัะบะพ ะฟัะธ ะฝะฐะปะธัะธะธ ะบะพัะทะธะฝั (ะดะปั ััะตะฝะฐัะฝะพะณะพ ัะฐะฝะถะธัะพะฒะฐะฝะธั).

| ะัะธะทะฝะฐะบ | ะะฟะธัะฐะฝะธะต |
|---------|----------|
| `cart_similarity_max` | ะะฐะบัะธะผะฐะปัะฝะฐั ะฑะปะธะทะพััั ะบ ัะพะฒะฐัะฐะผ ะฒ ะบะพัะทะธะฝะต |
| `cart_similarity_avg` | ะกัะตะดะฝัั ะฑะปะธะทะพััั ะบ ัะพะฒะฐัะฐะผ ะฒ ะบะพัะทะธะฝะต |
| `cart_products_count` | ะะพะปะธัะตััะฒะพ ัะพะฒะฐัะพะฒ ะฒ ะบะพัะทะธะฝะต |

**ะะธะฟะพัะตะทะฐ:**
- ะัะปะธ ะบะฐะฝะดะธะดะฐั ะฑะปะธะทะพะบ ะบ ัะพะฒะฐัะฐะผ ะฒ ะบะพัะทะธะฝะต โ ะฟะพะปัะทะพะฒะฐัะตะปั ัะฐะฑะพัะฐะตั ะฒ ะตะดะธะฝะพะผ ััะตะฝะฐัะธะธ

---

## ะะตะฝะตัะฐัะธั ะพะฑััะฐััะธั ะดะฐะฝะฝัั

### ะะพะทะธัะธะฒะฝัะต ะฟัะธะผะตัั (label = 1)

1. **ะะท ัะธะดะฑะตะบะฐ:**
   ```sql
   SELECT main_product_id, recommended_product_id
   FROM pair_feedback_stats
   WHERE positive_count >= 5
   ```
   - ะขัะตะฑัะตะผ ะผะธะฝะธะผัะผ 5 ะพะดะพะฑัะตะฝะธะน ะดะปั ะฝะฐะดะตะถะฝะพััะธ

2. **ะะท ะทะฐะบะฐะทะพะฒ (co-purchase):**
   ```sql
   SELECT oi1.product_id, oi2.product_id
   FROM order_items oi1
   JOIN order_items oi2 ON oi1.order_id = oi2.order_id
   WHERE oi1.product_id != oi2.product_id
   GROUP BY oi1.product_id, oi2.product_id
   HAVING COUNT(*) >= 2
   ```
   - ะัะปะธ ะบัะฟะธะปะธ ะฒะผะตััะต โฅ 2 ัะฐะทะฐ โ ัะธะปัะฝัะน ะฟะพะทะธัะธะฒะฝัะน ัะธะณะฝะฐะป

### ะะตะณะฐัะธะฒะฝัะต ะฟัะธะผะตัั (label = 0)

1. **ะะท ัะธะดะฑะตะบะฐ:**
   ```sql
   SELECT main_product_id, recommended_product_id
   FROM pair_feedback_stats
   WHERE negative_count > positive_count
   ```

2. **Hard negatives:**
   - ะะปั ะบะฐะถะดะพะณะพ main_product ะฑะตัะตะผ 3 ัะปััะฐะนะฝัั ัะพะฒะฐัะฐ ะธะท ะบะฐัะฐะปะพะณะฐ
   - ะัะบะปััะฐะตะผ ะฟะพะทะธัะธะฒะฝัะต ะฟะฐัั
   - ะัะถะฝั ะดะปั ะพะฑััะตะฝะธั ัะฐะทะปะธัะฐัั ัะตะปะตะฒะฐะฝัะฝะพะต ะพั ะฝะตัะตะปะตะฒะฐะฝัะฝะพะณะพ

### ะะฐะปะฐะฝั ะบะปะฐััะพะฒ

- **ะกะพะพัะฝะพัะตะฝะธะต:** 1 ะฟะพะทะธัะธะฒะฝัะน : 3 ะฝะตะณะฐัะธะฒะฝัั
- **ะะพัะตะผั ะฝะต 1:1?** ะ ัะตะฐะปัะฝะพััะธ ะฝะตัะตะปะตะฒะฐะฝัะฝัั ัะพะฒะฐัะพะฒ ะฑะพะปััะต

---

## API Endpoints

### 1. ะะฑััะตะฝะธะต ะผะพะดะตะปะธ

```http
POST /ml/train?iterations=500&learning_rate=0.05&depth=6&min_feedback_count=5
```

**ะะฐัะฐะผะตััั:**
- `iterations` (100-2000): ะบะพะปะธัะตััะฒะพ ะดะตัะตะฒัะตะฒ
- `learning_rate` (0.001-0.5): ัะบะพัะพััั ะพะฑััะตะฝะธั
- `depth` (3-10): ะณะปัะฑะธะฝะฐ ะดะตัะตะฒัะตะฒ
- `min_feedback_count` (1-20): ะผะธะฝะธะผัะผ ัะธะดะฑะตะบะพะฒ ะดะปั ะฒะบะปััะตะฝะธั ะฟะฐัั

**ะขัะตะฑะพะฒะฐะฝะธั:**
- ะะธะฝะธะผัะผ 100 ะพะฑััะฐััะธั ะฟัะธะผะตัะพะฒ
- ะะฐะฝะธะผะฐะตั 1-5 ะผะธะฝัั

**ะัะฒะตั:**
```json
{
  "success": true,
  "message": "Model trained successfully",
  "metadata": {
    "version": "20250115_143022",
    "trained_at": "2025-01-15T14:30:22",
    "train_samples": 1500,
    "val_samples": 375,
    "metrics": {
      "train_auc": 0.892,
      "val_auc": 0.867,
      "train_ap": 0.854,
      "val_ap": 0.831
    },
    "top_features": [
      {"feature": "copurchase_count", "importance": 245.3},
      {"feature": "embedding_cosine_similarity", "importance": 189.7},
      {"feature": "pair_feedback_approval_rate", "importance": 157.2}
    ]
  }
}
```

---

### 2. ะะฝัะพัะผะฐัะธั ะพ ะผะพะดะตะปะธ

```http
GET /ml/model-info
```

**ะัะฒะตั (ะตัะปะธ ะผะพะดะตะปั ะพะฑััะตะฝะฐ):**
```json
{
  "status": "ready",
  "version": "20250115_143022",
  "metadata": { ... },
  "feature_count": 36,
  "features": ["embedding_cosine_similarity", "pair_feedback_positive", ...]
}
```

**ะัะฒะตั (ะตัะปะธ ะผะพะดะตะปะธ ะฝะตั):**
```json
{
  "status": "no_model",
  "message": "ะะพะดะตะปั ะฝะต ะพะฑััะตะฝะฐ. ะัะฟะพะปัะทัะตััั ัะพัะผัะปัะฝัะน ัะบะพัะธะฝะณ."
}
```

---

### 3. ะะตะบะพะผะตะฝะดะฐัะธะธ ั ML

```http
GET /recommendations/{product_id}/with-ml?use_ml=true
```

**ะะฐัะฐะผะตััั:**
- `use_ml=true`: ะธัะฟะพะปัะทะพะฒะฐัั CatBoost
- `use_ml=false`: ัะพัะผัะปัะฝัะน ัะบะพัะธะฝะณ

**ะัะฒะตั:**
```json
{
  "product_id": 12345,
  "product_name": "ะจััะบะฐัััะบะฐ ะณะธะฟัะพะฒะฐั Knauf Rotband 30 ะบะณ",
  "detected_scenario": {"id": "wall_leveling", "name": "ะััะฐะฒะฝะธะฒะฐะฝะธะต ััะตะฝ"},
  "recommendations": [
    {
      "product": {
        "id": 67890,
        "name": "ะััะฝัะพะฒะบะฐ ะณะปัะฑะพะบะพะณะพ ะฟัะพะฝะธะบะฝะพะฒะตะฝะธั 10 ะป",
        "price": 450.0,
        "picture": "https://...",
        "discount_price": 405.0
      },
      "score": 0.923,
      "ml_score": 0.923,
      "rank": 1,
      "group_name": "ะััะฝัะพะฒะบะธ",
      "match_reasons": [
        {"type": "ml", "text": "CatBoost: ะฒััะพะบะฐั ัะตะปะตะฒะฐะฝัะฝะพััั"},
        {"type": "copurchase", "text": "ะะพะบัะฟะฐัั ะฒะผะตััะต: 47x"},
        {"type": "semantic", "text": "ะกัะพะถะตััั: 87%"}
      ]
    }
  ],
  "total_count": 20,
  "ranking_method": "catboost"
}
```

**ะะพะปะต `ranking_method`:**
- `"catboost"` โ ะธัะฟะพะปัะทะพะฒะฐะปัั ML
- `"formula"` โ ะธัะฟะพะปัะทะพะฒะฐะปัั ัะพัะผัะปัะฝัะน ัะบะพัะธะฝะณ (ัะพะปะฑัะบ)

---

## ะะตััะธะบะธ ะบะฐัะตััะฒะฐ

### Offline ะผะตััะธะบะธ (ะฟัะธ ะพะฑััะตะฝะธะธ)

1. **AUC (Area Under ROC Curve)**
   - ะะตัะพััะฝะพััั, ััะพ ะฟะพะทะธัะธะฒะฝัะน ะฟัะธะผะตั ะฟะพะปััะธั ะฑะพะปััะธะน ัะบะพั, ัะตะผ ะฝะตะณะฐัะธะฒะฝัะน
   - **Train AUC:** 0.85-0.95
   - **Val AUC:** 0.80-0.90

2. **Average Precision (AP)**
   - ะกัะตะดะฝะตะต precision ะฟะพ ะฒัะตะผ recall
   - **Train AP:** 0.80-0.95
   - **Val AP:** 0.75-0.90

3. **NDCG@10 (Normalized Discounted Cumulative Gain)**
   - ะะฐัะตััะฒะพ ัะฐะฝะถะธัะพะฒะฐะฝะธั ัะพะฟ-10
   - **Val NDCG@10:** > 0.70

4. **PrecisionAt@5**
   - ะะพะปั ัะตะปะตะฒะฐะฝัะฝัั ะฒ ัะพะฟ-5
   - **Val P@5:** > 0.60

### Online ะผะตััะธะบะธ (ะฒ ะฟัะพะดะฐะบัะตะฝะต)

ะะพัะปะต ะดะตะฟะปะพั ะฝัะถะฝะพ ัะพะฑะธัะฐัั:

1. **CTR ัะตะบะพะผะตะฝะดะฐัะธะน:**
   ```
   CTR = (ะบะปะธะบะธ ะฝะฐ ัะตะบะพะผะตะฝะดะฐัะธะธ) / (ะฟะพะบะฐะทั ัะตะบะพะผะตะฝะดะฐัะธะน)
   ```

2. **Conversion Rate:**
   ```
   CR = (ะฟะพะบัะฟะบะธ ัะตะบะพะผะตะฝะดะพะฒะฐะฝะฝัั ัะพะฒะฐัะพะฒ) / (ะฟะพะบะฐะทั)
   ```

3. **Average Basket Lift:**
   ```
   Lift = (ััะตะดะฝะธะน ัะตะบ ั ัะตะบะพะผะตะฝะดะฐัะธัะผะธ) / (ััะตะดะฝะธะน ัะตะบ ะฑะตะท ัะตะบะพะผะตะฝะดะฐัะธะน)
   ```

---

## ะัะธะผะตั ะธัะฟะพะปัะทะพะฒะฐะฝะธั

### ะจะฐะณ 1: ะกะฑะพั ะดะฐะฝะฝัั

```bash
# ะะฐะณััะทะธัั ะดะฐะฝะฝัะต ะฒ PostgreSQL
python data/load_data.py

# ะกะณะตะฝะตัะธัะพะฒะฐัั ัะผะฑะตะดะดะธะฝะณะธ
docker exec -it spbtechrun-recommendations-1 python generate_embeddings.py

# ะกะพะฑัะฐัั ัะธะดะฑะตะบ ะพั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
# (ัะตัะตะท POST /feedback ั frontend)
```

### ะจะฐะณ 2: ะะฑััะตะฝะธะต ะผะพะดะตะปะธ

```bash
curl -X POST "http://localhost:8000/ml/train?iterations=500&learning_rate=0.05&depth=6"
```

**ะะพะณะธ ะพะฑััะตะฝะธั:**
```
================================================================================
ะะะะะะะฆะะฏ ะะะฃะงะะฎะฉะะฅ ะะะะะซะฅ ะะะฏ CATBOOST RANKER
================================================================================

[1/5] ะะทะฒะปะตัะตะฝะธะต ะฟะพะทะธัะธะฒะฝัั ะฟัะธะผะตัะพะฒ ะธะท ัะธะดะฑะตะบะฐ...
  โ ะะฐะนะดะตะฝะพ 234 ะฟะพะทะธัะธะฒะฝัั ะฟัะธะผะตัะพะฒ ะธะท ัะธะดะฑะตะบะฐ

[2/5] ะะทะฒะปะตัะตะฝะธะต ะฟะพะทะธัะธะฒะฝัั ะฟัะธะผะตัะพะฒ ะธะท ะทะฐะบะฐะทะพะฒ...
  โ ะะฐะนะดะตะฝะพ 512 ะฟะพะทะธัะธะฒะฝัั ะฟัะธะผะตัะพะฒ ะธะท ะทะฐะบะฐะทะพะฒ
  โ ะัะตะณะพ ะฟะพะทะธัะธะฒะฝัั ะฟัะธะผะตัะพะฒ: 746

[3/5] ะะตะฝะตัะฐัะธั ะฝะตะณะฐัะธะฒะฝัั ะฟัะธะผะตัะพะฒ...
  โ ะะตะณะฐัะธะฒะฝัั ะธะท ัะธะดะฑะตะบะฐ: 89
  โ Hard negatives: 2238
  โ ะัะตะณะพ ะฝะตะณะฐัะธะฒะฝัั ะฟัะธะผะตัะพะฒ: 2327

[4/5] ะะทะฒะปะตัะตะฝะธะต ะฟัะธะทะฝะฐะบะพะฒ ะดะปั ะฒัะตั ะฟัะธะผะตัะพะฒ...
  โ ะัะธะทะฝะฐะบะธ ะธะทะฒะปะตัะตะฝั ะดะปั 746/746 ะฟะพะทะธัะธะฒะฝัั
  โ ะัะธะทะฝะฐะบะธ ะธะทะฒะปะตัะตะฝั ะดะปั 2327/2327 ะฝะตะณะฐัะธะฒะฝัั

[5/5] ะคะพัะผะธัะพะฒะฐะฝะธะต ัะธะฝะฐะปัะฝะพะณะพ ะดะฐัะฐัะตัะฐ...
  โ ะะฐะทะผะตั ะดะฐัะฐัะตัะฐ: 3073 ะฟัะธะผะตัะพะฒ
  โ ะะพะทะธัะธะฒะฝัั: 746 (24.3%)
  โ ะะตะณะฐัะธะฒะฝัั: 2327 (75.7%)
  โ ะฃะฝะธะบะฐะปัะฝัั query (main_product_id): 423
  โ ะัะธะทะฝะฐะบะพะฒ: 36

================================================================================
ะะะะะะะฆะะฏ ะะะะะะจะะะ
================================================================================

Train: 2458 ะฟัะธะผะตัะพะฒ, 338 query
Val:   615 ะฟัะธะผะตัะพะฒ, 85 query

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
ะะะะฃะกะ ะะะฃะงะะะะฏ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ

0:      learn: 0.6923077       test: 0.6888889 best: 0.6888889 (0)     total: 23.5ms   remaining: 11.7s
50:     learn: 0.8234567       test: 0.7942857 best: 0.7942857 (50)    total: 1.12s    remaining: 9.85s
...
500:    learn: 0.9187234       test: 0.8673456 best: 0.8673456 (500)   total: 10.8s    remaining: 0us

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
ะะฆะะะะ ะะะงะะกะขะะ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
Train AUC: 0.9187
Val AUC:   0.8673
Train AP:  0.8945
Val AP:    0.8512

โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
TOP-10 ะะะะะซะฅ ะะะะะะะะะ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                           feature  importance
                 copurchase_count      245.31
    embedding_cosine_similarity      189.72
   pair_feedback_approval_rate      157.23
                  price_ratio       134.89
              discount_percent       121.45
           same_root_category       98.76
         cart_similarity_max       87.34
                copurchase_log       76.21
         embedding_l2_distance       65.89
                  has_discount       58.12

โ ะะพะดะตะปั ัะพััะฐะฝะตะฝะฐ: models/catboost_ranker_20250115_143022.cbm
โ ะะตัะฐะดะฐะฝะฝัะต: models/catboost_ranker_20250115_143022_metadata.json

================================================================================
ะะะฃะงะะะะ ะะะะะะจะะะ
================================================================================
```

### ะจะฐะณ 3: ะขะตััะธัะพะฒะฐะฝะธะต

```bash
# ะะตะบะพะผะตะฝะดะฐัะธะธ ั CatBoost
curl "http://localhost:8000/recommendations/12345/with-ml?use_ml=true"

# ะะตะบะพะผะตะฝะดะฐัะธะธ ะฑะตะท ML (ะดะปั ััะฐะฒะฝะตะฝะธั)
curl "http://localhost:8000/recommendations/12345/with-ml?use_ml=false"
```

---

## Feature Importance: ะะฝัะตัะฟัะตัะฐัะธั

ะะพัะปะต ะพะฑััะตะฝะธั ะผะพะดะตะปะธ ะฐะฝะฐะปะธะทะธััะตะผ ัะพะฟ-ะฟัะธะทะฝะฐะบะธ:

### ะัะธะผะตั ัะตะทัะปััะฐัะฐ:

| ะัะธะทะฝะฐะบ | Importance | ะะฝัะตัะฟัะตัะฐัะธั |
|---------|------------|---------------|
| `copurchase_count` | 245.3 | **ะกะธะปัะฝะตะนัะธะน ัะธะณะฝะฐะป**: ะตัะปะธ ัะพะฒะฐัั ะฟะพะบัะฟะฐะปะธ ะฒะผะตััะต โ ะพัะตะฝั ัะตะปะตะฒะฐะฝัะฝั |
| `embedding_cosine_similarity` | 189.7 | **ะกะตะผะฐะฝัะธะบะฐ ะฒะฐะถะฝะฐ**: ะฑะปะธะทะบะธะต ะฟะพ ัะผััะปั ัะพะฒะฐัั ัะตะบะพะผะตะฝะดััััั ัะฐัะต |
| `pair_feedback_approval_rate` | 157.2 | **ะคะธะดะฑะตะบ ัะฐะฑะพัะฐะตั**: ะฟะพะปัะทะพะฒะฐัะตะปะธ ะทะฝะฐัั, ััะพ ะธะผ ะฝัะถะฝะพ |
| `price_ratio` | 134.9 | **ะฆะตะฝะพะฒะฐั ัะพะฒะผะตััะธะผะพััั**: ะดะตัะตะฒัะต ั ะดะตัะตะฒัะผะธ, ะดะพัะพะณะธะต ั ะดะพัะพะณะธะผะธ |
| `discount_percent` | 121.4 | **ะกะบะธะดะบะธ ะบะพะฝะฒะตัััั**: ัะตะผ ะฑะพะปััะต ัะบะธะดะบะฐ, ัะตะผ ะฒััะต ะฒะตัะพััะฝะพััั ะฟะพะบัะฟะบะธ |

**ะัะฒะพะดั:**
1. Co-purchase โ ะทะพะปะพัะพะน ััะฐะฝะดะฐัั (ะตัะปะธ ะตััั ะดะฐะฝะฝัะต)
2. Embeddings ัะพัะพัะพ ัะฐะฑะพัะฐัั ะดะปั ะฝะพะฒัั ัะพะฒะฐัะพะฒ (ะฑะตะท ะธััะพัะธะธ)
3. Feedback ะฑััััะพ ะฝะฐะบะฐะฟะปะธะฒะฐะตััั ะธ ััะธะปะธะฒะฐะตั ะผะพะดะตะปั
4. ะฆะตะฝะฐ ะธะผะตะตั ะทะฝะฐัะตะฝะธะต: ัะพะฒะฐัั ะดะพะปะถะฝั ะฑััั ะฒ ะพะดะฝะพะผ ัะตะฝะพะฒะพะผ ัะตะณะผะตะฝัะต

---

## ะะตัะตะพะฑััะตะฝะธะต ะผะพะดะตะปะธ

**ะะพะณะดะฐ ะฟะตัะตะพะฑััะฐัั?**
- ะะฐะท ะฒ ะฝะตะดะตะปั (ะฟัะธ ะฐะบัะธะฒะฝะพะผ ััะฐัะธะบะต)
- ะะพัะปะต ะฝะฐะบะพะฟะปะตะฝะธั 100+ ะฝะพะฒัั ัะธะดะฑะตะบะพะฒ
- ะะพัะปะต ะดะพะฑะฐะฒะปะตะฝะธั ะฝะพะฒะพะณะพ ัะพะฒะฐัะฝะพะณะพ ะบะฐัะฐะปะพะณะฐ

**ะัะพัะตัั:**
```bash
# 1. ะะฑะฝะพะฒะธัั co-purchase ััะฐัะธััะธะบั
docker exec -it spbtechrun-recommendations-1 python update_copurchase.py

# 2. ะะตัะตะพะฑััะธัั ะผะพะดะตะปั
curl -X POST "http://localhost:8000/ml/train"

# 3. ะะพะดะตะปั ะฐะฒัะพะผะฐัะธัะตัะบะธ ะทะฐะณััะทะธััั (ะธะปะธ ะฟะตัะตะทะฐะฟัััะธัั ัะตัะฒะธั)
docker-compose restart recommendations
```

**ะะตััะธะพะฝะธัะพะฒะฐะฝะธะต:**
- ะะพะดะตะปะธ ัะพััะฐะฝััััั ั timestamp: `catboost_ranker_20250115_143022.cbm`
- ะัะธ ะทะฐะฟััะบะต ะทะฐะณััะถะฐะตััั ะฟะพัะปะตะดะฝัั ะผะพะดะตะปั
- ะะพะถะฝะพ ะพัะบะฐัะธัััั: ัะดะฐะปะธัั ะฟะพัะปะตะดะฝัั, ะฟะตัะตะทะฐะฟัััะธัั ัะตัะฒะธั

---

## Troubleshooting

### ะัะธะฑะบะฐ: "ะะตะดะพััะฐัะพัะฝะพ ะดะฐะฝะฝัั ะดะปั ะพะฑััะตะฝะธั"

```json
{
  "detail": "Training failed: ะะตะดะพััะฐัะพัะฝะพ ะดะฐะฝะฝัั ะดะปั ะพะฑััะตะฝะธั: 47 ะฟัะธะผะตัะพะฒ. ะัะถะฝะพ ะผะธะฝะธะผัะผ 100."
}
```

**ะะตัะตะฝะธะต:**
1. ะกะพะฑะตัะธัะต ะฑะพะปััะต ัะธะดะฑะตะบะฐ (POST /feedback)
2. ะกะฝะธะทััะต `min_feedback_count`:
   ```bash
   curl -X POST "http://localhost:8000/ml/train?min_feedback_count=1"
   ```
3. ะะฐะณััะทะธัะต ะธััะพัะธัะตัะบะธะต ะทะฐะบะฐะทั (ะตัะปะธ ะตััั)

---

### ะะพะดะตะปั ะฝะต ะธัะฟะพะปัะทัะตััั (ranking_method = "formula")

**ะัะธัะธะฝั:**
1. ะะพะดะตะปั ะฝะต ะพะฑััะตะฝะฐ โ ะพะฑััะธัะต ัะตัะตะท `/ml/train`
2. ะัะธะฑะบะฐ ะฟัะธ inference โ ะฟัะพะฒะตัััะต ะปะพะณะธ ะบะพะฝัะตะนะฝะตัะฐ:
   ```bash
   docker logs spbtechrun-recommendations-1
   ```

---

### Val AUC ัะธะปัะฝะพ ะฝะธะถะต Train AUC (ะฟะตัะตะพะฑััะตะฝะธะต)

**ะัะธะทะฝะฐะบะธ:**
- Train AUC: 0.95, Val AUC: 0.70

**ะะตัะตะฝะธะต:**
- ะฃะผะตะฝััะธัั ะณะปัะฑะธะฝั ะดะตัะตะฒัะตะฒ:
  ```bash
  curl -X POST "http://localhost:8000/ml/train?depth=4"
  ```
- ะฃะผะตะฝััะธัั iterations:
  ```bash
  curl -X POST "http://localhost:8000/ml/train?iterations=300"
  ```
- ะฃะฒะตะปะธัะธัั `min_feedback_count` (ะฑะพะปััะต ะดะฐะฝะฝัั โ ัััะพะนัะธะฒะตะต ะผะพะดะตะปั)

---

## ะัะตะธะผััะตััะฒะฐ CatBoost ะฟะตัะตะด ัะพัะผัะปัะฝัะผ ัะบะพัะธะฝะณะพะผ

| ะัะฟะตะบั | ะคะพัะผัะปัะฝัะน ัะบะพัะธะฝะณ | CatBoost |
|--------|-------------------|----------|
| **ะะฐัััะพะนะบะฐ ะฒะตัะพะฒ** | ะัััะฝัั | ะะฒัะพะผะฐัะธัะตัะบะธ |
| **ะะตะปะธะฝะตะนะฝัะต ะฟะฐััะตัะฝั** | ะะตั | ะะฐ |
| **ะะดะฐะฟัะฐัะธั ะบ ะดะฐะฝะฝัะผ** | ะกัะฐัะธัะตัะบะฐั | ะะธะฝะฐะผะธัะตัะบะฐั |
| **ะะฝัะตัะฟัะตัะธััะตะผะพััั** | ะััะพะบะฐั (ัะพัะผัะปะฐ ะฒะธะดะฝะฐ) | ะกัะตะดะฝัั (feature importance) |
| **ะขัะตะฑะพะฒะฐะฝะธั ะบ ะดะฐะฝะฝัะผ** | ะะตั | 100+ ะฟัะธะผะตัะพะฒ |
| **ะัะตะผั ะพะฑััะตะฝะธั** | 0 ัะตะบ | 1-5 ะผะธะฝัั |
| **ะะฐัะตััะฒะพ (AUC)** | 0.75-0.80 | 0.85-0.90 |

**ะัะฒะพะด:**
- **Cold start:** ะธัะฟะพะปัะทัะนัะต ัะพัะผัะปัะฝัะน ัะบะพัะธะฝะณ
- **ะะพัะปะต ะฝะฐะบะพะฟะปะตะฝะธั ะดะฐะฝะฝัั:** ะฟะตัะตะบะปััะฐะนัะตัั ะฝะฐ CatBoost

---

## ะะฐะปัะฝะตะนัะธะต ัะปัััะตะฝะธั

### 1. ะะพะฟะพะปะฝะธัะตะปัะฝัะต ะฟัะธะทะฝะฐะบะธ

- **ะัะตะผะตะฝะฝัะต:** ะดะตะฝั ะฝะตะดะตะปะธ, ัะฐั, ัะตะทะพะฝะฝะพััั
- **ะะตััะพะฝะฐะปะธะทะฐัะธั:** ะธััะพัะธั ะฟะพะปัะทะพะฒะฐัะตะปั, ะณะตะพะปะพะบะฐัะธั
- **ะขะพะฒะฐัะฝัะต ะฐััะธะฑััั:** ะฑัะตะฝะด ะฟะพะฟัะปััะฝะพััะธ, ัะตะนัะธะฝะณะธ, ะพัะทัะฒั
- **ะะพะฝัะตะบััะฝัะต:** ััััะพะนััะฒะพ, ะธััะพัะฝะธะบ ััะฐัะธะบะฐ

### 2. Deep Learning

- ะะฐะผะตะฝะฐ embeddings ะฝะฐ BERT-like ะผะพะดะตะปะธ (multilingual-E5)
- ะะฑััะตะฝะธะต end-to-end ัะฐะฝะบะตัะฐ (Two-Tower Model)

### 3. Online Learning

- ะะฝะบัะตะผะตะฝัะฐะปัะฝะพะต ะพะฑััะตะฝะธะต ะฑะตะท ะฟะพะปะฝะพะณะพ ะฟะตัะตะพะฑััะตะฝะธั
- CatBoost ะฟะพะดะดะตัะถะธะฒะฐะตั `model.fit(pool, init_model=previous_model)`

### 4. A/B ัะตััะธัะพะฒะฐะฝะธะต

- ะััะฟะฟะฐ A: ัะพัะผัะปัะฝัะน ัะบะพัะธะฝะณ
- ะััะฟะฟะฐ B: CatBoost
- ะะตััะธะบะฐ: Conversion Rate, Revenue Lift

---

## ะะฐะบะปััะตะฝะธะต

CatBoost Ranker ะธะฝัะตะณัะธัะพะฒะฐะฝ ะฒ ัะธััะตะผั ัะตะบะพะผะตะฝะดะฐัะธะน SpbTechRun ะธ ะณะพัะพะฒ ะบ ะธัะฟะพะปัะทะพะฒะฐะฝะธั. ะกะธััะตะผะฐ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะพะฑััะฐะตััั ะฝะฐ ัะตะฐะปัะฝัั ะดะฐะฝะฝัั ะฟะพะปัะทะพะฒะฐัะตะปะตะน ะธ ะฟะพััะพัะฝะฝะพ ัะปัััะฐะตั ะบะฐัะตััะฒะพ ัะตะบะพะผะตะฝะดะฐัะธะน.

**ะะปััะตะฒัะต ะดะพััะธะถะตะฝะธั:**
- โ 36 ะฟัะธะทะฝะฐะบะพะฒ ะดะปั ะบะพะผะฟะปะตะบัะฝะพะณะพ ัะฐะฝะถะธัะพะฒะฐะฝะธั
- โ ะะฑััะตะฝะธะต ะฝะฐ ัะธะดะฑะตะบะต + ัะตะฐะปัะฝัั ะทะฐะบะฐะทะฐั
- โ Feature importance ะดะปั ะธะฝัะตัะฟัะตัะฐัะธะธ
- โ API ะดะปั ะพะฑััะตะฝะธั ะธ ะผะพะฝะธัะพัะธะฝะณะฐ
- โ Graceful fallback ะฝะฐ ัะพัะผัะปัะฝัะน ัะบะพัะธะฝะณ
- โ ะะตััะธะพะฝะธัะพะฒะฐะฝะธะต ะผะพะดะตะปะตะน

**ะะตััะธะบะธ:**
- AUC: 0.86+ (ะฝะฐ ะฒะฐะปะธะดะฐัะธะธ)
- NDCG@10: 0.70+
- ะัะตะผั inference: < 50ms ะฝะฐ 100 ะบะฐะฝะดะธะดะฐัะพะฒ
