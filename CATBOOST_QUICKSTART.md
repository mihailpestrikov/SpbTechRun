# CatBoost Ranker: –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

## –í–≤–µ–¥–µ–Ω–∏–µ

–≠—Ç–æ—Ç –≥–∞–π–¥ –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –∑–∞ **10 –º–∏–Ω—É—Ç** –∑–∞–ø—É—Å—Ç–∏—Ç—å CatBoost ML-—Ä–∞–Ω–∫–µ—Ä –≤ –ø—Ä–æ–µ–∫—Ç–µ SpbTechRun.

---

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

‚úÖ Docker –∏ Docker Compose —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã
‚úÖ –ü—Ä–æ–µ–∫—Ç —É–∂–µ –∑–∞–ø—É—â–µ–Ω (`docker-compose up -d`)
‚úÖ –î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã (`python data/load_data.py`)
‚úÖ –≠–º–±–µ–¥–¥–∏–Ω–≥–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω—ã (–∏–ª–∏ –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω—ã)

---

## –®–∞–≥ 1: –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
cd recommendations
pip install -r requirements.txt
```

–ù–æ–≤—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- `catboost==1.2.7` ‚Äî –≥—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π –±—É—Å—Ç–∏–Ω–≥
- `scikit-learn==1.4.0` ‚Äî –º–µ—Ç—Ä–∏–∫–∏ –∏ train/test split
- `pandas==2.2.0` ‚Äî –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö

---

## –®–∞–≥ 2: –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ –ë–î –µ—Å—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–ª—è –æ–±—É—á–µ–Ω–∏—è:

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–∏–¥–±–µ–∫–∞
docker exec -it spbtechrun-postgres-1 psql -U postgres -d spbtechrun -c \
  "SELECT COUNT(*) FROM pair_feedback_stats WHERE positive_count + negative_count > 0;"

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–∫–∞–∑–æ–≤
docker exec -it spbtechrun-postgres-1 psql -U postgres -d spbtechrun -c \
  "SELECT COUNT(*) FROM order_items;"
```

**–ú–∏–Ω–∏–º—É–º –Ω—É–∂–Ω–æ:** 100+ –ø—Ä–∏–º–µ—Ä–æ–≤ (—Ñ–∏–¥–±–µ–∫ + –∑–∞–∫–∞–∑—ã)

### –ï—Å–ª–∏ –¥–∞–Ω–Ω—ã—Ö –Ω–µ—Ç:

–î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–∏–Ω—Ç–µ—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∏–¥–±–µ–∫:

```sql
-- –í—Å—Ç–∞–≤—å—Ç–µ –≤ PostgreSQL —á–µ—Ä–µ–∑ psql
INSERT INTO pair_feedback_stats (main_product_id, recommended_product_id, positive_count, negative_count)
SELECT
    p1.id as main_product_id,
    p2.id as recommended_product_id,
    (RANDOM() * 10)::INT as positive_count,
    (RANDOM() * 3)::INT as negative_count
FROM products p1
CROSS JOIN products p2
WHERE p1.id != p2.id
  AND p1.category_id != p2.category_id
  AND p1.id < 1000  -- –æ–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏
  AND p2.id < 1000
LIMIT 500;
```

---

## –®–∞–≥ 3: –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏

### –ß–µ—Ä–µ–∑ API:

```bash
curl -X POST "http://localhost:8000/ml/train?iterations=200&learning_rate=0.05&depth=4"
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `iterations=200` ‚Äî –º–µ–Ω—å—à–µ –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Ç–µ—Å—Ç–∞ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 500)
- `learning_rate=0.05` ‚Äî —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å–∫–æ—Ä–æ—Å—Ç—å
- `depth=4` ‚Äî –≥–ª—É–±–∏–Ω–∞ –¥–µ—Ä–µ–≤—å–µ–≤ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 6)
- `min_feedback_count=1` ‚Äî –¥–ª—è —Ç–µ—Å—Ç–æ–≤ —Å –º–∞–ª—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –¥–∞–Ω–Ω—ã—Ö

### –ß–µ—Ä–µ–∑ Python —Å–∫—Ä–∏–ø—Ç:

```bash
cd recommendations
python test_catboost.py
```

–°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å—Ç–∏—Ç:
1. –û–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏
2. –¢–µ—Å—Ç inference
3. –í—ã–≤–æ–¥ –º–µ—Ç—Ä–∏–∫ –∏ feature importance

---

## –®–∞–≥ 4: –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

### –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –º–æ–¥–µ–ª–∏:

```bash
curl http://localhost:8000/ml/model-info | jq
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "status": "ready",
  "version": "20250115_143022",
  "metadata": {
    "trained_at": "2025-01-15T14:30:22",
    "train_samples": 1500,
    "val_samples": 375,
    "metrics": {
      "train_auc": 0.892,
      "val_auc": 0.867
    },
    "top_features": [
      {"feature": "copurchase_count", "importance": 245.3},
      {"feature": "embedding_cosine_similarity", "importance": 189.7}
    ]
  },
  "feature_count": 36
}
```

---

## –®–∞–≥ 5: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π

### –ë–µ–∑ ML (—Ñ–æ—Ä–º—É–ª—å–Ω—ã–π —Å–∫–æ—Ä–∏–Ω–≥):

```bash
curl "http://localhost:8000/recommendations/12345/with-ml?use_ml=false" | jq
```

### –° ML (CatBoost):

```bash
curl "http://localhost:8000/recommendations/12345/with-ml?use_ml=true" | jq
```

**–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ –Ω–∞ –ø–æ–ª–µ `ranking_method`:**
- `"formula"` ‚Äî —Ñ–æ—Ä–º—É–ª—å–Ω—ã–π —Å–∫–æ—Ä–∏–Ω–≥
- `"catboost"` ‚Äî ML-—Ä–∞–Ω–∫–µ—Ä

---

## –®–∞–≥ 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ CatBoost:

–ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —ç–Ω–¥–ø–æ–∏–Ω—Ç `/recommendations/{id}` **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CatBoost**, –µ—Å–ª–∏ –º–æ–¥–µ–ª—å –æ–±—É—á–µ–Ω–∞.

```bash
# –≠—Ç–æ—Ç —ç–Ω–¥–ø–æ–∏–Ω—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç CatBoost –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
curl http://localhost:8000/recommendations/12345
```

### –û—Ç–∫–ª—é—á–µ–Ω–∏–µ ML (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ):

```python
# –í product_recommender.py
result = await product_recommender.get_recommendations(
    product_id=product_id,
    session=session,
    use_ml=False,  # –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—Ç–∫–ª—é—á–∏—Ç—å ML
)
```

---

## –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 1. "Training failed: –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö"

**–ü—Ä–æ–±–ª–µ–º–∞:** –ú–µ–Ω—å—à–µ 100 –æ–±—É—á–∞—é—â–∏—Ö –ø—Ä–∏–º–µ—Ä–æ–≤

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –°–Ω–∏–∑—å—Ç–µ min_feedback_count
curl -X POST "http://localhost:8000/ml/train?min_feedback_count=1"
```

### 2. "ranking_method: formula" (–º–æ–¥–µ–ª—å –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)

**–ü—Ä–∏—á–∏–Ω—ã:**
- –ú–æ–¥–µ–ª—å –Ω–µ –æ–±—É—á–µ–Ω–∞ ‚Üí –∑–∞–ø—É—Å—Ç–∏—Ç–µ `/ml/train`
- –û—à–∏–±–∫–∞ –ø—Ä–∏ –∏–Ω—Ñ–µ—Ä–µ–Ω—Å–µ ‚Üí –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏:
  ```bash
  docker logs spbtechrun-recommendations-1 --tail 100
  ```

### 3. Val AUC << Train AUC (–ø–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ)

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –£–º–µ–Ω—å—à–∏—Ç–µ complexity –º–æ–¥–µ–ª–∏
curl -X POST "http://localhost:8000/ml/train?depth=3&iterations=300"
```

### 4. –ú–æ–¥—É–ª—å catboost –Ω–µ –Ω–∞–π–¥–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
docker-compose restart recommendations
# –∏–ª–∏ –ª–æ–∫–∞–ª—å–Ω–æ:
pip install -r requirements.txt
```

---

## –ü–µ—Ä–µ–æ–±—É—á–µ–Ω–∏–µ –º–æ–¥–µ–ª–∏

**–ö–æ–≥–¥–∞ –ø–µ—Ä–µ–æ–±—É—á–∞—Ç—å:**
- –†–∞–∑ –≤ –Ω–µ–¥–µ–ª—é (–ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–º —Ç—Ä–∞—Ñ–∏–∫–µ)
- –ü–æ—Å–ª–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è 100+ –Ω–æ–≤—ã—Ö —Ñ–∏–¥–±–µ–∫–æ–≤
- –ü–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–∞—Ç–∞–ª–æ–≥–∞ —Ç–æ–≤–∞—Ä–æ–≤

**–ö–∞–∫ –ø–µ—Ä–µ–æ–±—É—á–∏—Ç—å:**
```bash
# 1. –û–±–Ω–æ–≤–∏—Ç—å co-purchase —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
docker exec -it spbtechrun-recommendations-1 python update_copurchase.py

# 2. –ü–µ—Ä–µ–æ–±—É—á–∏—Ç—å –º–æ–¥–µ–ª—å
curl -X POST "http://localhost:8000/ml/train"

# 3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–∏—Å (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∑–∏—Ç –Ω–æ–≤—É—é –º–æ–¥–µ–ª—å)
docker-compose restart recommendations
```

**–í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ:**
- –ú–æ–¥–µ–ª–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è —Å timestamp: `catboost_ranker_20250115_143022.cbm`
- –ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ–¥–Ω—è—è –º–æ–¥–µ–ª—å
- –û—Ç–∫–∞—Ç: —É–¥–∞–ª–∏—Ç–µ –ø–æ—Å–ª–µ–¥–Ω—é—é –º–æ–¥–µ–ª—å, –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ

---

## –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∫–∞—á–µ—Å—Ç–≤–∞

### Offline –º–µ—Ç—Ä–∏–∫–∏ (–ø—Ä–∏ –æ–±—É—á–µ–Ω–∏–∏):

```bash
curl -X POST "http://localhost:8000/ml/train" | jq '.metadata.metrics'
```

**–¶–µ–ª–µ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:**
- Train AUC: 0.85-0.95
- Val AUC: 0.80-0.90
- Val NDCG@10: > 0.70

### Online –º–µ—Ç—Ä–∏–∫–∏ (–≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ):

–°–æ–±–∏—Ä–∞–π—Ç–µ —á–µ—Ä–µ–∑ –∞–Ω–∞–ª–∏—Ç–∏–∫—É:

1. **CTR —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π:**
   ```
   CTR = –∫–ª–∏–∫–∏ / –ø–æ–∫–∞–∑—ã
   ```

2. **Conversion Rate:**
   ```
   CR = –ø–æ–∫—É–ø–∫–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã—Ö / –ø–æ–∫–∞–∑—ã
   ```

3. **A/B —Ç–µ—Å—Ç:**
   - –ì—Ä—É–ø–ø–∞ A: —Ñ–æ—Ä–º—É–ª—å–Ω—ã–π —Å–∫–æ—Ä–∏–Ω–≥
   - –ì—Ä—É–ø–ø–∞ B: CatBoost
   - –ú–µ—Ç—Ä–∏–∫–∞: Revenue Lift, Average Basket Size

---

## Feature Importance: —á—Ç–æ –≤–∞–∂–Ω–æ?

–ü–æ—Å–ª–µ –æ–±—É—á–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ —Ç–æ–ø-–ø—Ä–∏–∑–Ω–∞–∫–∏:

```bash
curl http://localhost:8000/ml/model-info | jq '.metadata.top_features'
```

**–¢–∏–ø–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:**

| –ü—Ä–∏–∑–Ω–∞–∫ | Importance | –ß—Ç–æ —ç—Ç–æ –∑–Ω–∞—á–∏—Ç |
|---------|------------|----------------|
| `copurchase_count` | 245 | **–°–∏–ª—å–Ω–µ–π—à–∏–π —Å–∏–≥–Ω–∞–ª**: —Ç–æ–≤–∞—Ä—ã –ø–æ–∫—É–ø–∞—é—Ç –≤–º–µ—Å—Ç–µ |
| `embedding_cosine_similarity` | 189 | –°–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∞—è –±–ª–∏–∑–æ—Å—Ç—å —Ä–∞–±–æ—Ç–∞–µ—Ç |
| `pair_feedback_approval_rate` | 157 | –§–∏–¥–±–µ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –≤–∞–∂–µ–Ω |
| `price_ratio` | 134 | –¢–æ–≤–∞—Ä—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –≤ –æ–¥–Ω–æ–º —Ü–µ–Ω–æ–≤–æ–º —Å–µ–≥–º–µ–Ω—Ç–µ |
| `discount_percent` | 121 | –°–∫–∏–¥–∫–∏ —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–æ—Å—Ç—å |

**–í—ã–≤–æ–¥—ã:**
- Co-purchase ‚Äî –∑–æ–ª–æ—Ç–æ–π —Å—Ç–∞–Ω–¥–∞—Ä—Ç (–µ—Å–ª–∏ –µ—Å—Ç—å –∏—Å—Ç–æ—Ä–∏—è –∑–∞–∫–∞–∑–æ–≤)
- Embeddings ‚Äî –¥–ª—è –Ω–æ–≤—ã—Ö —Ç–æ–≤–∞—Ä–æ–≤ –±–µ–∑ –∏—Å—Ç–æ—Ä–∏–∏
- Feedback ‚Äî –±—ã—Å—Ç—Ä–æ –Ω–∞–∫–∞–ø–ª–∏–≤–∞–µ—Ç—Å—è –∏ —É–ª—É—á—à–∞–µ—Ç –º–æ–¥–µ–ª—å

---

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–°–æ–±–µ—Ä–∏—Ç–µ –±–æ–ª—å—à–µ –¥–∞–Ω–Ω—ã—Ö:**
   - –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ —Å–æ–±–µ—Ä–∏—Ç–µ —Ä–µ–∞–ª—å–Ω—ã–π —Ñ–∏–¥–±–µ–∫
   - –ó–∞–≥—Ä—É–∑–∏—Ç–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –∑–∞–∫–∞–∑—ã (–µ—Å–ª–∏ –µ—Å—Ç—å)

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≥–∏–ø–µ—Ä–ø–∞—Ä–∞–º–µ—Ç—Ä—ã:**
   ```bash
   # –≠–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∏—Ä—É–π—Ç–µ —Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏
   curl -X POST "http://localhost:8000/ml/train?iterations=1000&depth=8"
   ```

3. **A/B —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:**
   - –î–æ–±–∞–≤—å—Ç–µ –≤ backend –ª–æ–≥–∏–∫—É —Ä–∞–Ω–¥–æ–º–∏–∑–∞—Ü–∏–∏ (50% formula, 50% catboost)
   - –°—Ä–∞–≤–Ω–∏—Ç–µ –º–µ—Ç—Ä–∏–∫–∏ –∫–æ–Ω–≤–µ—Ä—Å–∏–∏

4. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø—Ä–∏–∑–Ω–∞–∫–∏:**
   - –í—Ä–µ–º–µ–Ω–Ω—ã–µ: –¥–µ–Ω—å –Ω–µ–¥–µ–ª–∏, —á–∞—Å
   - –ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è: –∏—Å—Ç–æ—Ä–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –¢–æ–≤–∞—Ä–Ω—ã–µ –∞—Ç—Ä–∏–±—É—Ç—ã: —Ä–µ–π—Ç–∏–Ω–≥–∏, –æ—Ç–∑—ã–≤—ã

---

## –ü–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–î–ª—è –≥–ª—É–±–æ–∫–æ–≥–æ –ø–æ–Ω–∏–º–∞–Ω–∏—è —Å–∏—Å—Ç–µ–º—ã —á–∏—Ç–∞–π—Ç–µ:

- **[docs/CATBOOST_RANKING.md](docs/CATBOOST_RANKING.md)** ‚Äî –ø–æ–ª–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ, –ø—Ä–∏–∑–Ω–∞–∫–∞–º, –æ–±—É—á–µ–Ω–∏—é
- **[docs/ML_RECOMMENDATION_SYSTEM.md](docs/ML_RECOMMENDATION_SYSTEM.md)** ‚Äî –æ–±—â–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ ML-—Å–∏—Å—Ç–µ–º—ã
- **[recommendations/test_catboost.py](recommendations/test_catboost.py)** ‚Äî —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏

---

## –†–µ–∑—é–º–µ

‚úÖ **–£—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:** `pip install -r requirements.txt`
‚úÖ **–û–±—É—á–∏–ª–∏ –º–æ–¥–µ–ª—å:** `POST /ml/train`
‚úÖ **–ü—Ä–æ–≤–µ—Ä–∏–ª–∏ –∫–∞—á–µ—Å—Ç–≤–æ:** Val AUC 0.86+
‚úÖ **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–ª–∏:** `GET /recommendations/{id}/with-ml?use_ml=true`
‚úÖ **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–ª–∏:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ `/recommendations/{id}`

**–í–∞—à–∞ —Å–∏—Å—Ç–µ–º–∞ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç ML-—Ä–∞–Ω–∂–∏—Ä–æ–≤–∞–Ω–∏–µ! üöÄ**

–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: —Å–æ–±–µ—Ä–∏—Ç–µ –±–æ–ª—å—à–µ —Ñ–∏–¥–±–µ–∫–∞ –∏ –ø–µ—Ä–µ–æ–±—É—á–∏—Ç–µ –º–æ–¥–µ–ª—å –¥–ª—è –µ—â–µ –ª—É—á—à–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤.
